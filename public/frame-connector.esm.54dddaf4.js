parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MsqM":[function(require,module,exports) {
const t=t=>"injected"===t?"injected":t.endsWith(".ipc")?"ipc":t.startsWith("wss://")||t.startsWith("ws://")?"ws":t.startsWith("https://")||t.startsWith("http://")?"http":"";module.exports=((o,c)=>[].concat(...[].concat(o).map(o=>c[o]?c[o].map(c=>({type:o,location:c,protocol:t(c)})):{type:"custom",location:o,protocol:t(o)})).filter(t=>!(!t.protocol&&"injected"!==t.type)||(console.log('eth-provider | Invalid provider preset/location: "'+t.location+'"'),!1)));
},{}],"Wt0G":[function(require,module,exports) {
const t=require("events");class s extends t{constructor(t){super(),this.connected=!1,this.nextId=0,this.promises={},this.subscriptions=[],this.connection=t,this.connection.on("connect",()=>this.checkConnection()),this.connection.on("close",()=>this.emit("close")),this.connection.on("payload",t=>{const{id:s,method:e,error:n,result:i}=t;void 0!==s?this.promises[s]&&(t.error?this.promises[s].reject(n):this.promises[s].resolve(i),delete this.promises[s]):e&&e.indexOf("_subscription")>-1&&(this.emit(t.params.subscription,t.params.result),this.emit(e,t.params),this.emit("data",t))}),this.on("newListener",(t,s)=>{"networkChanged"===t?!this.attemptedNetworkSubscription&&this.connected&&this.startNetworkSubscription():"accountsChanged"===t&&!this.attemptedAccountsSubscription&&this.connected&&this.startAccountsSubscription()})}async checkConnection(){try{this.emit("connect",await this._send("net_version")),this.connected=!0,this.listenerCount("networkChanged")&&!this.attemptedNetworkSubscription&&this.startNetworkSubscription(),this.listenerCount("accountsChanged")&&!this.attemptedAccountsSubscription&&this.startAccountsSubscription()}catch(t){this.connected=!1}}async startNetworkSubscription(){this.attemptedNetworkSubscription=!0;try{let s=await this.subscribe("eth_subscribe","networkChanged");this.on(s,t=>this.emit("networkChanged",t))}catch(t){console.warn("Unable to subscribe to networkChanged",t)}}async startAccountsSubscription(){this.attemptedAccountsSubscription=!0;try{let s=await this.subscribe("eth_subscribe","accountsChanged");this.on(s,t=>this.emit("accountsChanged",t))}catch(t){console.warn("Unable to subscribe to accountsChanged",t)}}enable(){return new Promise((t,s)=>{this._send("eth_accounts").then(e=>{if(e.length>0)this.accounts=e,this.coinbase=e[0],this.emit("enable"),t(e);else{const t=new Error("User Denied Full Provider");t.code=4001,s(t)}}).catch(s)})}_send(t,s=[]){if(!t||"string"!=typeof t)return new Error("Method is not a valid string.");if(!(s instanceof Array))return new Error("Params is not a valid array.");const e={jsonrpc:"2.0",id:this.nextId++,method:t,params:s},n=new Promise((t,s)=>{this.promises[e.id]={resolve:t,reject:s}});return this.connection.send(e),n}send(...t){return this._send(...t)}_sendBatch(t){return Promise.all(t.map(t=>this._send(t.method,t.params)))}subscribe(t,s,e=[]){return this._send(t,[s,...e]).then(t=>(this.subscriptions.push(t),t))}unsubscribe(t,s){return this._send(t,[s]).then(t=>{if(t)return this.subscriptions=this.subscriptions.filter(t=>t!==s),this.removeAllListeners(s),t})}sendAsync(t,s){return s&&"function"==typeof s?t?t instanceof Array?this.sendAsyncBatch(t,s):this._send(t.method,t.params).then(e=>{s(null,{id:t.id,jsonrpc:t.jsonrpc,result:e})}).catch(t=>{s(t)}):s(new Error("Invalid Payload")):s(new Error("Invalid or undefined callback provided to sendAsync"))}sendAsyncBatch(t,s){return this._sendBatch(t).then(e=>{let n=e.map((s,e)=>({id:t[e].id,jsonrpc:t[e].jsonrpc,result:s}));s(null,n)}).catch(t=>{s(t)})}isConnected(){return this.connected}close(){this.connection.close(),this.connected=!1;let t=new Error("Provider closed, subscription lost, please subscribe again.");this.subscriptions.forEach(s=>this.emit(s,t)),this.subscriptions=[]}}module.exports=s;
},{"events":"FRpO"}],"w7wX":[function(require,module,exports) {
const t=require("events"),e=!1;class n extends t{constructor(t,e,n){super(),this.targets=e,this.connections=t,this.connected=!1,this.status="loading",this.interval=n.interval||5e3,this.name=n.name||"default",this.inSetup=!0,this.connect()}connect(t=0){if(e&&0===t&&console.log(`\n\n\n\nA connection cycle started for provider with name: ${this.name}`),this.connection&&"connected"===this.connection.status&&t>=this.connection.index)e&&console.log("Stopping connection cycle becasuse we're already connected to a higher priority provider");else if(0===this.targets.length)e&&console.log("No valid targets supplied");else{const{protocol:n,location:o}=this.targets[t];this.connection=this.connections[n](o),this.connection.on("error",e=>this.connected?this.listenerCount("error")?this.emit("error",e):void console.warn("eth-provider - Uncaught connection error: "+e.message):this.connectionError(t,e)),this.connection.on("close",t=>{this.connected=!1,this.emit("close"),this.closing||this.refresh()}),this.connection.on("connect",()=>{this.connection.target=this.targets[t],this.connection.index=t,this.targets[t].status=this.connection.status,this.connected=!0,this.inSetup=!1,e&&console.log("Successfully connected to: "+this.targets[t].location),this.emit("connect")}),this.connection.on("data",t=>this.emit("data",t)),this.connection.on("payload",t=>this.emit("payload",t))}}refresh(t=this.interval){e&&console.log(`Reconnect queued for ${(t/1e3).toFixed(2)}s in the future`),clearTimeout(this.connectTimer),this.connectTimer=setTimeout(()=>this.connect(),t)}connectionError(t,n){this.targets[t].status=n,this.targets.length-1===t?(this.inSetup=!1,e&&console.warn("eth-provider unable to connect to any targets, view connection cycle summary: ",this.targets),this.refresh()):this.connect(++t)}close(){this.closing=!0,this.connection?this.connection.close():this.emit("close"),clearTimeout(this.connectTimer)}error(t,e,n=-1){this.emit("payload",{id:t.id,jsonrpc:t.jsonrpc,error:{message:e,code:n}})}send(t){this.inSetup?setTimeout(()=>this.send(t),100):this.connection.closed?this.error(t,"Not connected"):this.connection.send(t)}}module.exports=n;
},{"events":"FRpO"}],"ImLd":[function(require,module,exports) {
const e=require("events"),n=require("ethereum-provider"),t=require("../ConnectionManager"),i=n=>{function t(t){n.status=t,n instanceof e&&n.emit("status",t)}async function i(){if(n.inSetup)return setTimeout(i,1e3);try{await n.send("eth_syncing")?(t("syncing"),setTimeout(()=>i(),5e3)):t("connected")}catch(e){t("disconnected")}}return t("loading"),i(),n.on("connect",()=>i()),n.on("close",()=>t("disconnected")),n};module.exports=((e,r,c)=>{if(e.injected.__isProvider&&r.map(e=>e.type).indexOf("injected")>-1)return delete e.injected.__isProvider,i(e.injected);const s=new n(new t(e,r,c));return s.setMaxListeners(128),i(s)});
},{"events":"FRpO","ethereum-provider":"Wt0G","../ConnectionManager":"w7wX"}],"xwzX":[function(require,module,exports) {
module.exports={injected:["injected"],frame:["ws://127.0.0.1:1248","http://127.0.0.1:1248"],direct:["ws://127.0.0.1:8546","http://127.0.0.1:8545"],infura:["wss://mainnet.infura.io/ws/v3/786ade30f36244469480aa5c2bf0743b","https://mainnet.infura.io/v3/786ade30f36244469480aa5c2bf0743b"],infuraRopsten:["wss://ropsten.infura.io/ws/v3/786ade30f36244469480aa5c2bf0743b","https://ropsten.infura.io/v3/786ade30f36244469480aa5c2bf0743b"],infuraRinkeby:["wss://rinkeby.infura.io/ws/v3/786ade30f36244469480aa5c2bf0743b","https://rinkeby.infura.io/v3/786ade30f36244469480aa5c2bf0743b"],infuraKovan:["wss://kovan.infura.io/ws/v3/786ade30f36244469480aa5c2bf0743b","https://kovan.infura.io/v3/786ade30f36244469480aa5c2bf0743b"]};
},{}],"GxyP":[function(require,module,exports) {
const e=require("events");class r extends e{constructor(e,r){super(),e?setTimeout(()=>this.emit("error",new Error("Injected web3 provider is not currently supported")),0):setTimeout(()=>this.emit("error",new Error("No injected provider found")),0)}}module.exports=(e=>t=>new r(e,t));
},{"events":"FRpO"}],"fDFn":[function(require,module,exports) {
const e=require("events");class r extends e{constructor(e){super(),setTimeout(()=>this.emit("error",new Error(e)),0)}}module.exports=(e=>()=>new r(e));
},{"events":"FRpO"}],"G2HI":[function(require,module,exports) {
let e,r;module.exports=((l,t)=>{const o=[];l.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach(l=>{let a;e&&(l=e+l);try{a=JSON.parse(l)}catch(c){return e=l,clearTimeout(r),void(r=setTimeout(()=>t(new Error("Parse response timeout")),15e3))}clearTimeout(r),e=null,a&&o.push(a)}),t(null,o)});
},{}],"RTz4":[function(require,module,exports) {
const e=require("events"),t=require("../parse"),s=!1;let o;class r extends e{constructor(e,t,s){super(),o=e,setTimeout(()=>this.create(t,s),0)}create(e,s){o||this.emit("error",new Error("No WebSocket transport available"));try{this.socket=new o(e)}catch(r){return this.emit("error",r)}this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("open",()=>{this.emit("connect"),this.socket.addEventListener("message",e=>{const s="string"==typeof e.data?e.data:"";t(s,(e,t)=>{e||t.forEach(e=>{Array.isArray(e)?e.forEach(e=>this.emit("payload",e)):this.emit("payload",e)})})}),this.socket.addEventListener("close",()=>this.onClose())})}onClose(){this.socket=null,this.closed=!0,s&&console.log("Closing WebSocket connection"),this.emit("close"),this.removeAllListeners()}close(){this.socket?this.socket.close():this.onClose()}error(e,t,s=-1){this.emit("payload",{id:e.id,jsonrpc:e.jsonrpc,error:{message:t,code:s}})}send(e){this.socket&&this.socket.readyState===this.socket.CONNECTING?setTimeout(t=>this.send(e),10):!this.socket||this.socket.readyState>1?(this.connected=!1,this.error(e,"Not connected")):this.socket.send(JSON.stringify(e))}}module.exports=(e=>(t,s)=>new r(e,t,s));
},{"events":"FRpO","../parse":"G2HI"}],"gHrE":[function(require,module,exports) {
const t=require("events"),s=require("uuid/v4"),e=!1;let i;class r extends t{constructor(t,e,r){super(),i=t,this.connected=!1,this.subscriptions=!1,this.status="loading",this.url=e,this.pollId=s(),setTimeout(()=>this.create(),0)}create(){if(!i)return this.emit("error",new Error("No HTTP transport available"));this.on("error",()=>{this.connected&&this.close()}),this.init()}init(){this.send({jsonrpc:"2.0",method:"eth_syncing",params:[],id:1},(t,s)=>{if(t)return this.emit("error",t);this.send({jsonrpc:"2.0",id:1,method:"eth_pollSubscriptions",params:[this.pollId,"immediate"]},(t,s)=>{t||(this.subscriptions=!0,this.pollSubscriptions()),this.connected=!0,this.emit("connect")})})}pollSubscriptions(){this.send({jsonrpc:"2.0",id:1,method:"eth_pollSubscriptions",params:[this.pollId]},(t,s)=>{if(t)return this.subscriptionTimeout=setTimeout(()=>this.pollSubscriptions(),1e4),this.emit("error",t);this.closed||(this.subscriptionTimeout=this.pollSubscriptions()),s&&s.map(t=>{let s;try{s=JSON.parse(t)}catch(e){s=!1}return s}).filter(t=>t).forEach(t=>this.emit("payload",t))})}close(){e&&console.log("Closing HTTP connection"),this.closed=!0,this.emit("close"),clearTimeout(this.subscriptionTimeout),this.removeAllListeners()}filterStatus(t){if(t.status>=200&&t.status<300)return t;const s=new Error(t.statusText);throw s.res=t,s.message}error(t,s,e=-1){this.emit("payload",{id:t.id,jsonrpc:t.jsonrpc,error:{message:s,code:e}})}send(t,s){if(this.closed)return this.error(t,"Not connected");if("eth_subscribe"===t.method){if(!this.subscriptions)return this.error(t,"Subscriptions are not supported by this HTTP endpoint");t.pollId=this.pollId}const e=new i;let r=!1;const o=(i,o)=>{if(!r)if(e.abort(),r=!0,s)s(i,o);else{const{id:s,jsonrpc:e}=t,r=i?{id:s,jsonrpc:e,error:{message:i.message,code:i.code}}:{id:s,jsonrpc:e,result:o};this.emit("payload",r)}};e.open("POST",this.url,!0),e.setRequestHeader("Content-Type","application/json"),e.timeout=6e4,e.onerror=o,e.ontimeout=o,e.onreadystatechange=(()=>{if(4===e.readyState)try{const s=JSON.parse(e.responseText);o(s.error,s.result)}catch(t){o(t)}}),e.send(JSON.stringify(t))}}module.exports=(t=>(s,e)=>new r(t,s,e));
},{"events":"FRpO","uuid/v4":"hYHi"}],"IAcA":[function(require,module,exports) {
const e=require("./resolve"),n=require("./provider"),i=require("./presets"),o={ethereum:"undefined"!=typeof window&&void 0!==window.ethereum?window.ethereum:null,web3:"undefined"!=typeof window&&void 0!==window.web3?window.web3.currentProvider:null},t="undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:null,r="undefined"!=typeof window&&void 0!==window.XMLHttpRequest?window.XMLHttpRequest:null;o.ethereum&&(o.ethereum.__isProvider=!0);const d={injected:o.ethereum||require("./connections/injected")(o.web3),ipc:require("./connections/unavailable")("IPC connections are unavliable in the browser"),ws:require("./connections/ws")(t),http:require("./connections/http")(r)};module.exports=((o=["injected","frame"],t={})=>n(d,e(o,i),t));
},{"./resolve":"MsqM","./provider":"ImLd","./presets":"xwzX","./connections/injected":"GxyP","./connections/unavailable":"fDFn","./connections/ws":"RTz4","./connections/http":"gHrE"}],"yMR1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserRejectedRequestError=exports.FrameConnector=void 0;var e=require("@web3-react/abstract-connector"),t=r(require("eth-provider")),n=r(require("tiny-invariant"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function u(e,t,n){return(u=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function h(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||!h(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,i(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="The user rejected the request.",t}return o(t,e),t}(s(Error));exports.UserRejectedRequestError=l;var f=function(e){function r(t){var r;return 1!==t.supportedChainIds.length&&(0,n.default)(!1),(r=e.call(this,t)||this).handleNetworkChanged=r.handleNetworkChanged.bind(d(r)),r.handleChainChanged=r.handleChainChanged.bind(d(r)),r.handleAccountsChanged=r.handleAccountsChanged.bind(d(r)),r.handleClose=r.handleClose.bind(d(r)),r}o(r,e);var i=r.prototype;return i.handleNetworkChanged=function(e){this.emitUpdate({provider:this.provider,chainId:e})},i.handleChainChanged=function(e){this.emitUpdate({chainId:e})},i.handleAccountsChanged=function(e){this.emitUpdate({account:0===e.length?null:e[0]})},i.handleClose=function(e,t){this.emitDeactivate()},i.activate=function(){try{var e=this;return e.provider||(e.provider=(0,t.default)("frame")),e.provider.on("networkChanged",e.handleNetworkChanged).on("chainChanged",e.handleChainChanged).on("accountsChanged",e.handleAccountsChanged).on("close",e.handleClose),Promise.resolve(e.provider.enable().then(function(e){return e[0]}).catch(function(e){throw e&&4001===e.code?new l:e})).then(function(t){return{provider:e.provider,account:t}})}catch(n){return Promise.reject(n)}},i.getProvider=function(){try{return Promise.resolve(this.provider)}catch(e){return Promise.reject(e)}},i.getChainId=function(){try{return Promise.resolve(this.provider.send("eth_chainId"))}catch(e){return Promise.reject(e)}},i.getAccount=function(){try{return Promise.resolve(this.provider.send("eth_accounts").then(function(e){return e[0]}))}catch(e){return Promise.reject(e)}},i.deactivate=function(){this.provider.removeListener("networkChanged",this.handleNetworkChanged).removeListener("chainChanged",this.handleChainChanged).removeListener("accountsChanged",this.handleAccountsChanged).removeListener("close",this.handleClose)},r}(e.AbstractConnector);exports.FrameConnector=f;
},{"@web3-react/abstract-connector":"xxwS","eth-provider":"IAcA","tiny-invariant":"bfQg"}]},{},[], null)
//# sourceMappingURL=frame-connector.esm.54dddaf4.js.map